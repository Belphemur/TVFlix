// Generated by CoffeeScript 1.9.1
(function() {
  var apikey, username;

  username = localStorage.getItem("username");

  apikey = localStorage.getItem("apikey");

  (function($) {

    /*
      FUNCTION BLOCK
     */
    var getUserInfo, handleLogout, setLogout;
    setLogout = function() {
      return $('#userLoginButton').html("Logout").attr('data-logout', true);
    };

    /*
      Retrieve the user info
     */
    getUserInfo = function() {
      username = $("#username").val();
      apikey = $("#apikey").val();
      if (!username || !apikey) {
        $("#emptyAlert").fadeIn();
        return false;
      } else {
        $("#emptyAlert").fadeOut();
      }
      localStorage.setItem("username", username);
      localStorage.setItem('apikey', apikey);
      return true;
    };

    /*
      Remove data from the localstorage and logout the user
     */
    handleLogout = function() {
      username = null;
      apikey = null;
      localStorage.removeItem("username");
      localStorage.removeItem("apikey");
      return $(this).html("Login").removeAttr('data-logout');
    };

    /*
      check if already logged in with LocalStorage
     */
    if (username && apikey) {
      setLogout();
    }

    /*
      BUTTON MANAGEMENT
     */
    $("#loginButton").click(function(e) {
      e.preventDefault();
      if (getUserInfo()) {
        $("#loginModal").modal("hide");
        return setLogout();
      }
    });
    return $('#userLoginButton').click(function(e) {
      e.preventDefault();
      if ($(this).attr("data-logout")) {
        return handleLogout.call(this);
      } else {
        return $("#loginModal").modal("show");
      }
    });
  })(jQuery);

}).call(this);

//# sourceMappingURL=client.js.map
